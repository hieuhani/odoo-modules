<odoo>
  <data>
    <record model="ir.ui.view" id="kiu_oauth_server.list">
      <field name="name">oauth.application.list</field>
      <field name="model">oauth.application</field>
      <field name="arch" type="xml">
        <tree>
          <field name="name"/>
          <field name="client_id"/>
          <field name="redirect_uri"/>
        </tree>
      </field>
    </record>

    <record id="kiu_oauth_server.form" model="ir.ui.view">
        <field name="name">oauth.application.form</field>
        <field name="model">oauth.application</field>
        <field name="arch" type="xml">
            <form string="arch">
                <sheet>
                    <group>
                        <field name="name"/>
                        <field name="user_id"/>
                        <field name="client_id"/>
                        <field name="redirect_uri"/>
                        <field name="logo" widget="image" />
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record model="ir.actions.act_window" id="kiu_oauth_server.action_window">
      <field name="name">oauth.application.window</field>
      <field name="res_model">oauth.application</field>
      <field name="view_mode">tree,form</field>
    </record>
    <menuitem name="OAuth Server"
        id="oauth_server"
        sequence="4"
        action="kiu_oauth_server.action_window"
        web_icon="contacts,static/description/icon.png" />

    <template id="assets" name="Kiu Oauth Server Assets">
      <link href="/kiu_oauth_server/static/src/less/style.less" rel="stylesheet"/>
    </template>

    <template id="kiu_oauth_server.scope_confirmation" name="Scopes confirmation">
      <t t-call="web.layout">
        <t t-set="head">
            <t t-call-assets="web.assets_common" t-js="false"/>
            <t t-call-assets="web.assets_frontend" t-js="false"/>
            <t t-call-assets="web.assets_common" t-css="false"/>
            <t t-call-assets="web.assets_frontend" t-css="false"/>
            <t t-call-assets="kiu_oauth_server.assets"/>
        </t>
        <form class="oauth-container clearfix" method="post">
          <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
          <header class="clearfix">
            <div class="navbar-header">
                <a href="/" class="navbar-brand logo">
                    <img src="/logo.png" />
                </a>
            </div>
            <ul class="nav navbar-nav navbar-right" id="top_menu">
              <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                      <b>
                          <span t-esc="(len(user.name)&gt;25) and (user.name[:23]+'...') or user.name"/>
                          <span class="caret"></span>
                      </b>
                  </a>
                  <ul class="dropdown-menu js_usermenu" role="menu">
                      <li id="o_logout"><a t-attf-href="/web/session/logout?redirect=/" role="menuitem">Logout</a></li>
                  </ul>
              </li>
            </ul>
          </header>
          <section class="app-info">
            <img class="app-logo" t-attf-src="data:image/*;base64,{{app.logo}}" />
            <h3 class="app-name">
              <t t-esc="app.name" /> will be able to:
            </h3>
            <ul class="app-scopes list-group">
              <t t-foreach="scopes" t-as="s">
                <li class="list-group-item">
                  <t t-esc="s"/>
                </li>
              </t>
            </ul>
          </section>
          <section class="app-actions">
            <button class="btn btn-block btn-primary btn-lg continue-authorize">
                Continue as <t t-esc="user.name" />
            </button>
            <a href="/" class="cancel-authorize">
              Cancel
            </a>
            <p class="write-notice">
              <i class="fa fa-lock" /> This application doesn't modify your database.
            </p>
          </section>
        </form>
      </t>
    </template>
  </data>
</odoo>
